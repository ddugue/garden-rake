require '../lib/rake/garden'
include Rake::Garden

task :booty do
  puts "BOOTY"
end

chore :bam => ["copy/*.txt"] do |t|
  puts "String respond? #{"%f".respond_to? :magic_format}"
  puts "Testing chore"
  t.files.each do |f|
    check f >> "echo %f"
    cp f, "sub/%f.2.txt"
    sh "sleep 5 && echo 'DAN'"
    # sh "echo 'Oops' && exit 1"
    cd "sub"
    cd ".."
    set :PROBLEM, 'no'
    sh "echo $PROBLEM"
  end
end

chore :test => [:bam] do |t|
  t.files.each do |f|
    puts "File changed #{f}"
  end
end
